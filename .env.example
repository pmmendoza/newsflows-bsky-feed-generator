# Whichever port you want to run this on 
FEEDGEN_PORT=3000

# Change this to use a different bind address
FEEDGEN_LISTENHOST="localhost"

# Database credentials
FEEDGEN_DB_HOST=localhost
FEEDGEN_DB_BASE=feedgen-db
FEEDGEN_DB_PASSWORD=feedgen
FEEDGEN_DB_USER=feedgen
FEEDGEN_DB_PORT=5432

# Don't change unless you're working in a different environment than the primary Bluesky network
FEEDGEN_SUBSCRIPTION_ENDPOINT="wss://bsky.network"

# Set this to the hostname that you intend to run the service at
FEEDGEN_HOSTNAME="example.com"

# Set this to the DID of the account you'll use to publish the feed
# You can find your accounts DID by going to
# https://bsky.social/xrpc/com.atproto.identity.resolveHandle?handle=${YOUR_HANDLE}
FEEDGEN_PUBLISHER_DID="did:plc:abcde...."

# Only use this if you want a service did different from did:web
# FEEDGEN_SERVICE_DID="did:plc:abcde..."

# DID of accounts to hightlight in feeds
NEWSBOT_NL_DID="did:plc:toz4no26o2x4vsbum7cp4bxp"
NEWSBOT_IR_DID="did:plc:vzmnljt7otfbbgrmachtefxh"
NEWSBOT_CZ_DID="did:plc:cegiy4pfghh4rjs7ks7pbnkm"
NEWSBOT_FR_DID="did:plc:kzmukwaf72iwepygposicgt3"

# key to use the prio endpoint
PRIORITIZE_API_KEY=""

# --- Study token issuance + compliance summary ---
# /api/study/token requires the same master key as other admin endpoints:
#   api-key: <PRIORITIZE_API_KEY>
# Secret for signing participant JWTs (HS256)
STUDY_JWT_SECRET=""
# Optional: JWT TTL in seconds (default 4 days)
STUDY_JWT_TTL_SECONDS=345600

# Optional: per-DID rate limit for /api/study/compliance-summary
# Set STUDY_COMPLIANCE_RATE_LIMIT_MAX=0 to disable.
STUDY_COMPLIANCE_RATE_LIMIT_WINDOW_SECONDS=60
STUDY_COMPLIANCE_RATE_LIMIT_MAX=60

# Delay between reconnect attempts to the firehose subscription endpoint (in milliseconds)
FEEDGEN_SUBSCRIPTION_RECONNECT_DELAY=3000

# how often follows are updated in seconds
FOLLOWS_UPDATE_INTERVAL_MS=3600

# --- Storage lifecycle (scoped ingestion + retention) ---
# Default OFF. Enable only after validating on a fresh/small DB.
FEEDGEN_SCOPED_INGESTION=false
# Refresh interval for the in-memory allowlist cache (milliseconds)
FEEDGEN_ALLOWLIST_REFRESH_MS=60000
# Optional: for publisher/newsbot posts only, store engagement events authored by subscribers only (reduces write volume further)
FEEDGEN_PUBLISHER_ENGAGEMENT_SUBSCRIBER_ONLY=false
# Optional research mode: additionally track subscriber-authored posts/likes/reposts even when outside the allowlist
FEEDGEN_TRACK_SUBSCRIBER_ACTIVITY=false

# Retention (TTL deletes). Default OFF; safe only on a reduced DB.
FEEDGEN_RETENTION_ENABLED=false
FEEDGEN_RETENTION_INTERVAL_MS=21600000
FEEDGEN_RETENTION_POST_DAYS=14
FEEDGEN_RETENTION_ENGAGEMENT_DAYS=14
FEEDGEN_RETENTION_DELETE_BATCH_SIZE=50000
